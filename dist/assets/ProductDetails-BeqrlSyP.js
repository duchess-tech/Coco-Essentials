import{r,l as w,u as h,a as I,C,m as b,j as t,Q as _,b as v,d as P,c as T}from"./index-W29gIuby.js";import{D as k}from"./Defaultlayout-vZ3qN10I.js";import{C as y}from"./index-JKkbLNqC.js";import{F as E}from"./footer-CYV9Fxay.js";import{T as W}from"./index-DS57sa4y.js";import{f as A}from"./utils-Ug9IFQHp.js";import{L as F}from"./index-DmMzkQr3.js";import"./iconBase-DaNi9Cxe.js";import"./Login-D4dCwv0B.js";import"./index-BwnSUIqb.js";import"./Register-B7b3leXN.js";import"./index-13rOuACM.js";import"./index-DYVT73-p.js";import"./index-CejQMpiJ.js";import"./index-BYU5Di5h.js";const X=()=>{const[s,p]=r.useState(),d=w().product_id,n=h(e=>e==null?void 0:e.wishlist.items),f=h(e=>e==null?void 0:e.cart.items),a=I(),{user:i,sessionId:l,loadUser:u}=r.useContext(C);r.useEffect(()=>{u()},[]),r.useEffect(()=>{b({url:`https://radiant-whispersstore.onrender.com/api/products/getProduct/${d}`,method:"get"}).then(e=>{p(e.data.product)}).catch(e=>{console.log(e)})},[d]);const j=e=>{a(v({userId:i==null?void 0:i._id,sessionId:l,productId:e==null?void 0:e._id}))},g=e=>{if(!n)return!1;a(P({userId:i==null?void 0:i._id,sessionId:l,productId:e==null?void 0:e._id}))},m=e=>n.some(o=>o.productId._id===e),c=e=>f.some(o=>o.productId._id===e),N=e=>{a(T({userId:i==null?void 0:i._id,sessionId:l,productId:e._id,quantity:1}))};return t.jsx(k,{children:t.jsxs("div",{className:"mt-40 h-full p-3 xl:p-0 xl:flex xl:w-3/4  m-auto mb-16 justify-center xl:mr-32 xl:gap-10  ",children:[t.jsx("div",{className:" w-1/4 rounded-2xl border overflow-hidden shadow-lg  ",children:t.jsx("img",{src:s==null?void 0:s.image,className:"w-full h-full",alt:""})}),t.jsxs("div",{className:"p-2  ",children:[t.jsx("div",{className:"xl:p-3 bg-[#EEDCF9] text-black xl:w-full p-1  ",children:t.jsx("h2",{className:"xl:text-3xl",children:s==null?void 0:s.name})}),t.jsx("h3",{className:"xl:text-sm text-[12px] mt-3",children:s==null?void 0:s.description}),t.jsxs("div",{className:"flex items-center mt-3",children:[t.jsx(W,{}),t.jsx("h3",{className:"xl:text-lg ",children:A(Number(s==null?void 0:s.price))})]}),t.jsxs("div",{className:"flex items-end gap-3",children:[t.jsx("div",{className:"flex w-12 border rounded border-[#891980] mt-3 cursor-pointer",children:m(s==null?void 0:s._id)?t.jsx(E,{size:18,className:" text-[#891980] mr-2",onClick:()=>g(s)}):t.jsx(y,{size:20,className:"ml-6",onClick:()=>j(s)})}),m(s==null?void 0:s._id)?t.jsx("p",{children:"Item added to wishlist"}):t.jsx("p",{children:"Add to whishlist"})]}),t.jsxs("div",{className:"flex mt-4 gap-9",children:[t.jsx("button",{className:"",onClick:()=>N(s),children:t.jsx(F,{size:24,className:`${c(s==null?void 0:s._id)?"text-[#891980]":"text-black"}`})}),c(s==null?void 0:s._id)?t.jsx("p",{children:"Item in cart"}):t.jsx("p",{children:"Add to cart"})]})]}),t.jsx(_,{position:"bottom-right",autoClose:2e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0,theme:"light"})]})})};export{X as default};
