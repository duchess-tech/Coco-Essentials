import{r as a,C as w,j as t,Q as b,h as j,B as s}from"./index-W29gIuby.js";import{a as y}from"./index-BwnSUIqb.js";import"./iconBase-DaNi9Cxe.js";function v(){const o=a.useRef(""),n=a.useRef(""),[i,l]=a.useState(!1),{setOpenRegister:d,setLogin:c,setisadmin:u,loadUser:m,setOpenLogin:r}=a.useContext(w),p=()=>{d(!0),r(!1)},g=async f=>{l(!0),f.preventDefault();const h={email:o.current.value,password:n.current.value};try{const e=await j.post("/user/login",h,{withCredentials:!0});e.data.created?(s.success(e.data.message),c(e.data.isLoggedIn),u(e.data.isAdmin),s.success(e.data.message),localStorage.setItem("Login",e.data.isLoggedIn),localStorage.setItem("token",e.data.accessToken),localStorage.setItem("refreshToken",e.data.refreshToken),r(!1),s.success(e.data.message)):e.data.created.error_type===0?s.error(e.data.error[0].msg):e.data.error_type===1&&s.error(e.data.message)}catch(e){console.log(e)}finally{m(),l(!1)}},x=()=>{r(!1)};return t.jsxs("div",{children:[t.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-gray-800 bg-opacity-50 z-50  p-2 xl:p-0 ",children:t.jsxs("form",{onSubmit:g,className:"forgot-password xl:w-1/3 lg:w-1/2 sm:w-full md:w-1/2  w-full   2xl:w-1/4  p-3 rounded-lg shadow-md bg-white transition duration-500 ease-in-out border-2 border-transparent hover:border-purple-500",children:[t.jsx("h2",{className:"text-center mt-4 mb-4 text-2xl",children:"Login"}),t.jsx("label",{htmlFor:"email",className:"text-[12px]",children:"Email"}),t.jsx("input",{ref:o,id:"email",type:"email",placeholder:"Enter email",className:"border mb-6 text-[12px] rounded-lg w-full shadow appearance-none p-2 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"}),t.jsx("label",{htmlFor:"email",className:"text-[12px]",children:"Password"}),t.jsx("input",{ref:n,id:"password",type:"password",placeholder:"Enter password",className:"border mb-6 text-[12px] rounded-lg w-full shadow appearance-none p-2 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"}),t.jsxs("div",{className:"flex justify-between mt-3",children:[t.jsxs("button",{className:"border mb-3 text-[12px] p-1 rounded-lg w-1/3 bg-pink-200",onClick:p,children:["Signup"," "]}),t.jsx("button",{className:"border mb-3 text-[12px] p-1 rounded-lg w-1/3",onClick:x,children:"Back"})]}),t.jsxs("button",{className:"mb-3 text-[12px] p-2 rounded-lg w-full mt-3 bg-[#891980] leading-tight shadow text-white transition duration-300 ease-in-out transform hover:scale-105  flex items-center gap-3 justify-center",type:"submit",children:["Login",i&&t.jsx(y,{className:"animate-spin"})]})]})}),t.jsx(b,{position:"bottom-right",autoClose:5e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0,theme:"light"})]})}export{v as default};
